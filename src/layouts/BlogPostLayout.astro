---
import BaseLayout from "./BaseLayout.astro";
import RecipeSchema from "../components/RecipeSchema.astro";
import type { CollectionEntry } from "astro:content";

interface Props {
  title: string;
  description: string;
  postData: CollectionEntry<"blog">["data"];
}

const { title, description, postData } = Astro.props;

// Create frontmatter object for BaseLayout from postData
const frontmatter = {
  title: postData.metadata?.title || title,
  metaDescription: postData.seo?.metaDescription || postData.metadata?.description || description,
  metaKeywords: postData.seo?.metaKeywords?.join(", ") || "",
  metaCanonical: postData.seo?.metaCanonical || "",
  featuredImage: postData.images?.featured?.src || "",
};
---

<BaseLayout frontmatter={frontmatter}>
  <RecipeSchema postData={postData} slug={postData.metadata?.slug || ""} slot="head" />
  <slot />
</BaseLayout>
