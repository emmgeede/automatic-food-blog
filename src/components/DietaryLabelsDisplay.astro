---
/**
 * Container-Komponente, die alle aktiven Dietary Labels fÃ¼r ein Rezept anzeigt
 */
import DietaryBadge from './DietaryBadge.astro';
import { getDietaryLabelDisplay, getActiveDietaryLabels } from '../utils/dietaryDetection';
import type { DietaryLabels } from '../utils/dietaryDetection';

export interface Props {
  dietaryLabels?: DietaryLabels;
  size?: 'sm' | 'md' | 'lg';
  className?: string;
  clickable?: boolean;
}

const { dietaryLabels, size = 'md', className = '', clickable = true } = Astro.props;

// Hole alle aktiven Labels
const activeLabels = getActiveDietaryLabels(dietaryLabels);

// Wenn keine Labels aktiv sind, nichts rendern
if (activeLabels.length === 0) {
  return null;
}

// Labels mit Display-Informationen
const labelDisplays = activeLabels
  .map(key => {
    const display = getDietaryLabelDisplay(key as keyof DietaryLabels);
    return display ? { key, ...display } : null;
  })
  .filter(Boolean);
---

{labelDisplays.length > 0 && (
  <div class:list={['dietary-labels-container', 'flex flex-wrap gap-2', className]}>
    {labelDisplays.map(labelDisplay => (
      <DietaryBadge
        label={labelDisplay!.label}
        labelKey={labelDisplay!.key}
        size={size}
        clickable={clickable}
      />
    ))}
  </div>
)}
