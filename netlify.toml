[build]
  command = "npm run build"
  publish = "dist"
  functions = "netlify/functions"

# Redirect /api/* to Netlify Functions
[[redirects]]
  from = "/api/auth/google/login"
  to = "/.netlify/functions/auth-google-login"
  status = 200

[[redirects]]
  from = "/api/auth/google/callback"
  to = "/.netlify/functions/auth-google-callback"
  status = 200

[[redirects]]
  from = "/api/auth/check"
  to = "/.netlify/functions/auth-check"
  status = 200

[[redirects]]
  from = "/api/auth/logout"
  to = "/.netlify/functions/auth-logout"
  status = 200

[[redirects]]
  from = "/api/admin/comments"
  to = "/.netlify/functions/admin-comments"
  status = 200

[[redirects]]
  from = "/api/admin/comments/reply"
  to = "/.netlify/functions/admin-comments-reply"
  status = 200

[[redirects]]
  from = "/api/admin/comments/:id"
  to = "/.netlify/functions/admin-comments-delete/:id"
  status = 200

[[redirects]]
  from = "/api/track-view"
  to = "/.netlify/functions/track-view"
  status = 200

[[redirects]]
  from = "/api/popular-recipes"
  to = "/.netlify/functions/popular-recipes"
  status = 200
